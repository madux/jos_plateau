<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        
        <record id ="memo_model_form_view_3" model ="ir.ui.view">
            <field name="name">Memo Record</field>
            <field name="model">memo.model</field>
            <!-- <field name="context">{'form_no_edit=user_ids in', ['res_users']</field>  -->
            <field eval="1" name="priority"/>
            <field name ="arch" type="xml">
                <form string="Memo Record" js_class="memo_model_form_view_3">
                    <header>
                        <button name="forward_memo" id="forward_memo" string="Proceed" icon="fa-forward" 
                        invisible="state in ['Done', 'Refuse'] or user_is_approver == True or is_budget_verification_memo_request == True" type="object" class="oe_highlight fwm"/>
                        <button name="approve_memo"
                        invisible="memo_type_key not in ['cash_advance', 'loan', 'Payment', 'server_access', 'material_request', 'procurement_request','procurement', 'vehicle_request', 'employee_update', 'Internal', 'export_process', 'import_process', 'agency_process', 'travel', 'transport', 'procurement', 'warehouse', 'cfwd', 'agency', 'all', 'project_pro'] or state in ['submit', 'Approve', 'Done', 'Refuse'] or not user_is_approver
                        or is_contract_memo_request == True or is_budget_verification_memo_request == True or is_budget_allocation_request == True" 
                         string="Approve" type="object" class="oe_highlight"/>

                         <button name="approve_memo"
                        invisible="state not in ['Approve2'] or user_is_approver == False
                        or is_contract_memo_request != True" 
                         string="Approve" type="object" class="oe_highlight"/>

                        <button name="generate_recruitment_request" invisible= "memo_type_key not in ['recruitment_request'] or state not in ['Done', 'Approve2'] or not user_is_approver" string="View / Generate Recruitment Request" type="object" class="oe_highlight"/>
                        <button name="action_post_and_vallidate_payment" string="Register Payment" type="object" class="oe_highlight" confirm="Are you sure you want to make Payment?" 
                        invisible="not user_is_approver or state not in ['Approve', 'Approve2'] or is_contract_memo_request == True or is_budget_verification_memo_request == True or is_budget_allocation_request == True"/>
                        <!-- invisible="not user_is_approver or state not in ['Approve', 'Approve2'] or memo_type_key not in ['Payment'] or not is_request_completed"/> -->
                        <button name="send_memo_to_contacts" string="Send Memo" type="object" class="oe_highlight" confirm="Are you sure you want to make send memo?" 
                        invisible="not user_is_approver or state not in ['Approve2'] or memo_type_key not in ['internal', 'Internal'] or internal_memo_option not in ['all', 'selected']"/>
                        <button name="complete_memo_transactions" string="Generate &amp; Comfirm Entries" type="object" class="oe_highlight" confirm="Are you sure you want to generate?" invisible="state not in ['Done'] or is_request_completed or memo_type_key not in ['material_request', 'procurement_request', 'procurement', 'vehicle_request'] or not user_is_approver"/>
                        <button name="generate_move_entries" string="Create &amp; Post Cash Advance Entry" type="object" class="oe_highlight" confirm="Are you sure you want to generate?" invisible="state not in ['Approve', 'Done'] or memo_type_key not in ['cash_advance'] or not user_is_approver"/>
                        <button name="generate_soe_entries" string="Retire Expense" type="object" class="oe_highlight" confirm="Are you sure you want to Retire?" invisible="state not in ['Approve Done'] or memo_type_key not in ['soe'] or not user_is_approver"/>
                        <button name="generate_loan_entries" string="Generate Loan Entry" type="object" class="oe_highlight" confirm="Are you sure you want to generate a loan entry?" groups="base.group_system,company_memo.mainmemo_account,account.group_account_manager"
                         invisible="state not in ['Done'] or memo_type_key not in ['loan']"/>
                        <button name="set_draft" invisible="state != 'Refuse'" string="ReSet &amp; Forward" type="object" class="btn-primary"/>
                        <button name="return_memo" id="return_id" string="Return Memo" icon="fa-redo" invisible="state not in ['Sent', 'Approve', 'Approve2']" type="object"/>
                        <button name="print_budget_certifcation" id="printbudget" string="Print Budget Certification" invisible="is_budget_verification_memo_request != True" type="object"/>
                        <button name="confirm_budget_verification" class="oe_highlight" id="confirmbudget" string="Confirm Budget" 
                        invisible="is_budget_verification_memo_request != True or state != 'submit'" type="object"/>

                        <button name="approve_budget_allocation" class="oe_highlight" id="approveBudgetAllocation" string="Confirm Budget Allocation" 
                        invisible="is_budget_allocation_request != True or state not in ['Approve2'] or not user_is_approver" type="object"/>
                        <button name="Cancel" string="Cancel" type="object" invisible="state != ['sent']"/>
                        <!-- <button name="print_memo" string="Print" icon="fa-print" invisible="state in ['submit', 'Refuse']" type="object" class="oe_highlight"/> -->
                        <!-- <button name="print_work_instruction" string="Print Work Instruction" icon="fa-print" invisible="state in ['Refuse']" type="object" class="btn-primary"/> -->
                        <!-- <button name="print_po" string="Print" icon="fa-print" invisible="state in ['Refuse'] or is_budget_verification_memo_request == True" type="object" class="btn-primary"/> -->
                        <!-- <field name="stage_id" widget="statusbar" force_save="1" readonly="1" domain="[('id', 'in', computed_stage_ids)]"/> -->
                        <button name="print_payment_voucher" id="printVoucher" string="Print Payment Voucher" invisible="external_memo_request != True or state in ['submit', 'Sent', 'refuse', 'cancel']" type="object"/>
                        <field name="stage_id" widget="statusbar" readonly="0" options="{'clickable': '1'}"/>
                    </header>
                    <sheet> 
                        <p class="align-center" style="color: green; font-size=30px" invisible="alert_option != 'normal'"><h1><field name="memo_type" force_save="1" readonly="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/></h1></p>
                        <!-- <p class="align-center" style="color: green;" invisible="alert_option != 'normal'">* On Track: (completion date met) </p>
                        <p class="align-center" style="color: orange;" invisible = "alert_option != 'warning'">* At Risk: (completion date approaching) </p>
                        <p class="align-center" style="color: red;" invisible = "alert_option != 'danger'">* Overdue: (completion date missed) </p> -->
                        <notebook>
                            <page string="Dashboard">
                                <div class="header text-center">
                                    <field name="stage_id" widget="statusbar" force_save="1" readonly="1" domain="[('id', 'in', computed_stage_ids)]"/>
                                </div>
                                <div class="g-sidenav-show  bg-gray-100" id="dashboard-content">
                                    <div class="dashboard-main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
                                        
                                        <div class="container py-4 form-body">
                                            <div class="row g-3">
                                                <!-- General Info -->
                                                <div class="col-md-4">
                                                    <div class="card border-0">
                                                        <div class="form-card-header">General Info</div>
                                                        <div class="card-body shadow rounded">
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Subject:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="name" readonly="1"/></div>
                                                            </div>
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Initiator:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="employee_id" readonly="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/></div>
                                                            </div>
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Department:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="dept_ids" readonly="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/></div>
                                                            </div>
                                                            
                                                             
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Customer Info -->
                                                <div class="col-md-4">
                                                    <div class="card border-0">
                                                        <div class="form-card-header">Other Info</div>
                                                        <div class="card-body shadow rounded">
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Reference:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="code" readonly="1"/></div>
                                                            </div>
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Request Type:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="memo_type" readonly="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/></div>
                                                            </div> 
                                                            <div class="row border-bottom py-2" invisible="is_budget_verification_memo_request == False">
                                                                <div class="col-4">
                                                                    <strong>budget Head:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="budget_id" readonly="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/></div>
                                                            </div> 
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Consignment Info -->
                                                <div class="col-md-4">
                                                    <div class="card border-0 consignment">
                                                        <div class="form-card-header">Operational Info</div>
                                                        <div class="card-body shadow rounded">
                                                             
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Request Date</strong>
                                                                </div>
                                                                <div class="col-8"><field name="date" readonly="1" /></div>
                                                            </div>
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>MDA:</strong>
                                                                </div>
                                                                <div class="col-8"></div>
                                                            </div> 
                                                            <!-- <div class="row py-2"> -->
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Status:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="stage_id" readonly="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/></div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row g-3 mt-3">
                                                <!-- Task -->
                                                <div class="col-md-6">
                                                    <div class="card border-0">
                                                        <div class="form-card-header">Tasks</div>
                                                        <div class="card-body shadow rounded">
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Todo:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="task_todo" readonly="1" force_save="1"/></div>
                                                            </div>
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Active:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="task_active" readonly="1" force_save="1"/></div>
                                                            </div>
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Done:</strong>
                                                                </div>
                                                                <div class="col-8"><field name="task_done" readonly="1" force_save="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/></div>
                                                            </div>
                                                            <div class="row border-bottom py-2">
                                                                <div class="col-4">
                                                                    <strong>Overdue:</strong>
                                                                </div>
                                                                <div class="col-8">0</div>
                                                            </div>
                                                            <div class="row pt-3 pb-2">
                                                                <div class="col-6">
                                                                    <div class="h5">Request Duration</div>
                                                                    <p class="py-2">Remaining Days: <field name="remaining_task_duration" readonly="1" invisible="0"/></p>
                                                                    <div class="progress" style="height: 20px;">
                                                                        <!-- <div class="progress-bar" role="progressbar" style="width: 10%;">10%</div> -->
                                                                        <field name="percentage_of_remaining_task" readonly="0" invisible="0" widget="progressbar" class="progress-bar" role="progressbar" style="width: 10%;"/>
                                                                    </div>
                                                                </div>
                                                                <div class="col-6">
                                                                    <div class="h5">Task</div>
                                                                    <field name="task_todo_percentage" invisible="1"/> 
                                                                    <field name="task_active_percentage" invisible="1"/> 
                                                                    <field name="task_done_percentage" invisible="1"/>
                                                                    <div class="text-center">
                                                                        <!-- <canvas id="taskDonutChart" width="240" height="100"></canvas> -->
                                                                        <field name="task_active" widget="taskdoughnutMemo" 
                                                                        options="{'title': 'Task Title', 'todo_field_red': 'task_todo_percentage', 'active_field_yellow': 'task_active_percentage', 'done_field_green': 'task_done_percentage', 'max_field': 'default_percentage_target', 'style': 'width:10px; height: 40px;'}" nolabel="1" force_save="1"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Finance -->
                                            
                                                <div class="col-md-6">
                                                    <div class="card border-0 shadow rounded finance">
                                                        <div class="form-card-header">Finance</div>
                                                        <div class="card-body text-center row" >
                                                            <!-- BUDGETED -->
                                                            <div class="col-6">
                                                                <div class="row bg-white rounded" style="margin: auto; margin-right: 1px; margin-top: 10px;">
                                                                    <div class="col-6 text-start align-self-end">
                                                                        <h4 class="text-danger">MDA Budget</h4>
                                                                        <p class="fst-italic m-0 inner">Cost (₦): <field name="total_cost" force_save="1" readonly="1"/></p>
                                                                        <p class="fst-italic inner">Revenue (₦): <field name="total_revenue" force_save="1" readonly="1"/></p>
                                                                        <field name="default_percentage_target" invisible="1"/>
                                                                        <field name="displayed_cost_revenue_margin" invisible="1"/>
                                                                    </div>
                                                                    <div class="col-6 pb-5" style="padding-left: 0px;">
                                                                        <field name="total_revenue_percentage" widget="gaugeMemo" options="{'title': '', 'guageInsideText': 'displayed_cost_revenue_margin', 'field_green': 'Revenue', 'field_red': 'Cost', 'max_field': 'default_percentage_target'}" nolabel="1" force_save="1"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- BILLED COST -->
                                                            <div class="col-6">
                                                                <div class="row bg-white rounded" style="margin-right: 1px; margin-top: 10px;">
                                                                    <div class="col-6 text-start align-self-end">
                                                                        <h5 class="text-danger">MDA Bills</h5>
                                                                        <p class="fst-italic m-0 inner">Billed (₦): <field name="total_cost" force_save="1" readonly="1"/></p>
                                                                        <p class="fst-italic inner">Not Billed (₦): <field name="total_po_to_be_invoiced" force_save="1" readonly="1"/></p>
                                                                    </div>
                                                                    <div class="col-6 pb-5" style="padding-left: 0px;">
                                                                        <!-- <div class="halfdoughnut"> -->
                                                                            <field name="displayed_second_quad_percentage" invisible="1"/>
                                                                            <field name="second_quad_percentage" widget="gaugeMemo" options="{'title': '', 'guageInsideText': 'displayed_second_quad_percentage', 'field_green': 'Billed', 'field_red': 'Not Billed', 'max_field': 'default_percentage_target', 'style': 'width:10px; height: 40px;'}" nolabel="1" force_save="1"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- REALIZED -->
                                                            <div class="col-6">
                                                                <div class="row bg-white rounded" style="margin: auto; margin-right: 1px; margin-top: 10px;">
                                                                    <div class="col-6 text-start align-self-end">
                                                                        <h5 class="text-danger">Income</h5>
                                                                        <p class="fst-italic m-0 inner">Cost (₦): <field name="total_closed_paid_cost" force_save="1" readonly="1"/></p>
                                                                        <p class="fst-italic inner">Revenue (₦): <field name="total_closed_paid_revenue" force_save="1" readonly="1"/></p>
                                                                    </div>
                                                                    <div class="col-6 pb-5" style="padding-left: 0px;">
                                                                        <div class="halfdoughnut">
                                                                            <field name="displayed_third_quad_percentage" invisible="1"/>
                                                                            <field name="third_quad_percentage" widget="gaugeMemo" options="{'title': '', 'guageInsideText': 'displayed_third_quad_percentage', 'field_green': 'Realized', 'field_red': 'Not Realized', 'max_field': 'default_percentage_target', 'style': 'width:10px; height: 40px;'}" nolabel="1" force_save="1"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- REVENUE -->
                                                            <div class="col-6">
                                                                <div class="row bg-white rounded" style="margin-right: 1px; margin-top: 10px;">
                                                                    <div class="col-6 text-start align-self-end">
                                                                        <h5 class="text-danger">Revenue</h5>
                                                                        <p class="fst-italic m-0 inner">Invoiced (₦): <field name="total_paid_revenue" force_save="1" readonly="1"/></p>
                                                                        <p class="fst-italic inner">Not Invoiced (₦): <field name="total_so_to_be_invoiced" force_save="1" readonly="1"/></p>
                                                                    </div>
                                                                    <div class="col-6 pb-5" style="padding-left: 0px;">
                                                                        <div class="halfdoughnut">
                                                                            <field name="displayed_fourth_quad_percentage" invisible="1"/>
                                                                            <field name="fourth_quad_percentage" widget="gaugeMemo" options="{'title': '', 'guageInsideText': 'displayed_fourth_quad_percentage', 'field_green': 'Invoiced', 'field_red': 'Not Invoiced', 'max_field': 'default_percentage_target'}" nolabel="1" force_save="1"/>

                                                                            <!-- <canvas id="revenue"></canvas>
                                                                            
                                                                            <div class="halfdoughnut__title">N100,000,000</div> -->
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </page>
                            <page string="Transaction">
                                <div class="row">
                                    <div class="col-xs-4 pull-left mt8">
                                        <button name="return_memo" class="btn-danger oe_stat_button sm" icon="fa-redo" invisible="memo_type_key not in ['Internal', 'server_access', 'employee_update', 'material_request', 'procurement_request','procurement', 'cash_advance', 'soe', 'vehicle_request'] or state != 'Sent' or not user_is_approver" type="object" string="Refuse" confirm="Are you sure you want to refuse with comments?">
                                        </button>
                                    </div> 
                                </div>
                                <br/>
                                <div class="oe_button_box oe_right">
                                    <button name="action_get_attachment_view" class="oe_highlight" icon="fa-book" type="object">
                                        <field name="attachment_number" widget="statinfo" string=" - Documents"/>
                                    </button>
                                    <button name="view_related_record" class="btn-primary oe_highlight" invisible="state in ['Sent', 'submit', 'Refuse']" type="object" string="View Related Record"/>
                                </div>
                                <div class="oe_title">
                                <label for="name"/>
                                    <h1 style="color: green;">
                                        <field name="name" required="1" force_save="1" placeholder="e.g. Description" readonly="state not in ['submit']"/>
                                    </h1>
                                </div>
                                <div class='alert alert-info' role="alert" invisible="is_budget_verification_memo_request == False or budget_has_allocation == False or state in ['Done']">
                                    Validation Status: Success - Budget Funds Available. You can proceed with your request. GoodLuck !!!
                                </div>
                                <group>
                                    <group>
                                        <label for="memo_type"/>
                                        <div>
                                            <field name="memo_type" required="1" readonly="state not in ['submit']" 
                                            options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                            domain="[('id', 'in', dummy_memo_types)]"/>
                                        </div>
                                    </group> 
                                    <group>
                                    </group>
                                    <group name="normal_memo_group1"> 
                                        <!-- invisible fields -->
                                        <field name="memo_type_key" string="Memo key" invisible="1" force_save="1"/> 
                                        <field name="alert_option" invisible="1" force_save="1" readonly="0"/>
                                        <field name="dummy_memo_types" invisible="1" widget="many2many_tags" force_save="1"/>
                                        <field name="demo_staff" invisible="1"/>
                                        <field name="is_internal_transfer" invisible="1"/>
                                        <field name="external_memo_request" invisible="1"/> 
                                        <field name="is_contract_memo_request" readonly="0" invisible="1"/>
                                        <field name="is_budget_verification_memo_request" readonly="0" invisible="1"/>
                                        <field name="budget_has_allocation" invisible="1"/> 
                                        
                                        <field name="dummy_budget_ids" invisible="1" widget="many2many_tags" force_save="1"/>
                                        <field name="dummy_budget_line_ids" invisible="1" widget="many2many_tags" force_save="1"/>
                                        <field name="user_is_approver" invisible="1"/> 
                                        <field name="is_request_completed" invisible="1"/> 
                                        <field name="state" invisible="1"/> 
                                        <field name="employee_id" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" readonly="state not in ['submit']" string="Initiator"/>
                                        <field name="phone" readonly="1" invisible="1"/>
                                        <field name="email" readonly="1"/>
                                        <field name="approver_id" invisible="1" readonly="0" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" groups="base.group_system"/>
                                        <field name="approver_ids" invisible="1" widget="many2many_tags" readonly="0" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" groups="base.group_system"/>
                                        <field name="currency_id" invisible="1"/>
                                        
                                        <field name="memo_setting_id" invisible="1" force_save="1" options="{&quot;no_open&quot;: False, &quot;no_create&quot;: True}"/>
                                        <field name="direct_employee_id" required="0" invisible="1" string="Through" readonly="state in ['Done', 'Approve']"/>
                                        <field name="move_id" invisible="1"/>
                                        <!-- <field name="contractor_id" readonly="state not in ['submit']" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                        invisible="is_contract_memo_request == False" required="is_contract_memo_request == True"/> -->

                                        <field name="budget_id" readonly="state not in ['submit']"
                                        invisible="is_budget_verification_memo_request != True and is_budget_allocation_request != True" 
                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                        required="is_budget_verification_memo_request == True or is_budget_allocation_request == True"/>
                                       
                                        <field name="budget_line_id" readonly="state not in ['submit']" domain="[('id', 'in', dummy_budget_line_ids)]" 
                                        invisible="is_budget_verification_memo_request != True and is_budget_allocation_request != True" 
                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                        required="is_budget_verification_memo_request == True or is_budget_allocation_request == True"/>
                                       
                                        <!-- <field name="budget_id" readonly="state not in ['submit']" domain="[('id', 'in', dummy_budget_ids)]" 
                                        invisible="is_budget_verification_memo_request != True and is_budget_allocation_request != True" 
                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                        required="is_budget_verification_memo_request == True or is_budget_allocation_request == True"/> -->
                                        <field name="budget_balance_amount"
                                       readonly="1" force_save="1" 
                                        invisible="is_budget_allocation_request != True"
                                        />
                                        <field name="budget_balance_amount"
                                       readonly="1" force_save="1" 
                                        invisible="is_budget_verification_memo_request != True"
                                        />
                                        <field name="is_budget_allocation_request" invisible="1"/> 
                                        <field name="budget_amount" string="Budget Amount" 
                                        readonly="state not in ['submit']" 
                                        required="is_budget_allocation_request == True" 
                                        invisible="is_budget_allocation_request != True"
                                        />
                                        
                                        <field name="active" invisible="1" groups="base.group_system"/>
                                        <field name="has_sub_stage" invisible="1"/> 
                                        <field name="qr_code_commonpass" invisible="1"/> 
                                        <field name="validity_set" required="0" invisible="1"/> 
                                        <field name="state" invisible="1" force_save="1" readonly="0"/>
                                        <field name="memo_project_type" readonly="0" invisible="1"/>
                                        <field name="freeze_po_budget" readonly="0" invisible="1"/>
                                        <field name="to_unfreezed_budget" readonly="0" invisible="1"/>
                                        <field name="work_order_code" invisible="1" force_save="1"/>
                                        <!-- invisible fields -->

                                        <!-- <field name="internal_memo_option" string="Memo Option" invisible="memo_type_key not in ['Internal', 'internal']" readonly="state not in ['submit']"/> -->
                                        <field name="internal_memo_option" string="Memo Option" invisible="1" readonly="state not in ['submit']"/>
                                         <!-- <field name="partner_ids" string="Reciepients" widget="many2many_tags" 
                                         readonly="state not in ['submit']" invisible="internal_memo_option not in ['selected']"
                                         required="not user_is_approver or internal_memo_option in ['selected'] or memo_type_key in ['Internal', 'internal']" 
                                         options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/> -->
                                        <!-- <field name="client_id" string="Client" readonly="state not in ['submit']" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" />  -->
                                        <field name="client_id" string="Client" invisible="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" /> 
                                        
                                        <field name="dept_ids" widget="selection" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" readonly="1" invisible="1"/>
                                        <field name="loan_type" invisible="memo_type_key != 'loan'" required="memo_type_key == 'loan'"/>
                                        <field name="loan_amount" invisible="memo_type_key != 'loan'" required="memo_type_key == 'loan'"/>
                                        <field name="periods" invisible="memo_type_key != 'loan'" required="memo_type_key == 'loan'"/>
                                        <field name="method_period" invisible="memo_type_key != 'loan'" required="memo_type_key == 'loan'"/>
                                        <field name="start_date" invisible="memo_type_key != 'loan'" required="memo_type_key == 'loan'"/>
                                        <field name="cash_advance_reference" invisible="memo_type_key != 'soe'" required="memo_type_key == 'soe'"/>
                                        <field name="soe_advance_reference" invisible="memo_type_key != 'cash_advance'"/>
                                         
                                    </group> 
                                    <group name="normal_memo_group2"> 
                                        <field name="date" readonly="state not in ['submit']" options="{&quot;datepicker&quot;: {&quot;daysOfWeekDisabled&quot;: [5,6]}}"/>
                                        <field name="set_staff" string="Assigned to" readonly="1" invisible="0" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                        <field name="date_deadline" readonly="state not in ['submit']" invisible="memo_type_key not in ['material_request procurement_request','procurement']"/>
                                        <field name="leave_type_id" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" required="memo_type_key in ['leave_request']" invisible="memo_type_key not in ['leave_request']" readonly="state not in ['submit']"/>
                                        <field name="leave_start_date" widget="daterange" options="{&quot;related_end_date&quot;: &quot;leave_end_date&quot;, &quot;datepicker&quot;: {&quot;daysOfWeekDisabled&quot;: [5, 6]}}" required="memo_type_key in ['leave_request']" invisible="memo_type_key not in ['leave_request']" readonly="state not in ['submit']"/>
                                        <field name="leave_end_date" required="memo_type_key in ['leave_request']" invisible="memo_type_key not in ['leave_request']" readonly="state not in ['submit']"/>
                                        <field name="user_ids" readonly="1" invisible="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                        
                                        
                                        <field name="amountfig" string="Amount" readonly="1" invisible="memo_type_key not in ['Payment']"/>
                                        <field name="project_id" readonly="state not in ['submit']" invisible="1" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                        <field name="project_memo_id" string="Parent Project" invisible="1" required="0" readonly="state not in ['submit']" domain="[('memo_project_type', 'in', ['vehicle_request', 'employee_update', 'Internal', 'export_process', 'import_process', 'agency_process', 'travel', 'transport', 'procurement', 'warehouse', 'cfwd', 'agency'])]"/>  
                                        <field widget="binary" height="64" name="file_upload" filename="file_namex" required="0" invisible="1" string="Upload File"/>
                                        <field name="file_namex" invisible="1"/> 
                                        <field name="to_create_document" invisible="1"/> 
                                        <field name="memo_category_id" invisible="not to_create_document" required="to_create_document"/> 
                                        <field name="document_folder" invisible="not to_create_document" required="to_create_document"/> 
                                        <!-- <field name="status_progress" widget="progressbar" string="Progress(%)" invisible="1"/> -->
                                        <field name="code" force_save="1"/>   

                                        <separator class="alert alert-info" string="Extra info" invisible="validity_set == False"/>
                                        <field name="enabled_date_validity" required="0" readonly="0" invisible="validity_set == False"/> 
                                        <field name="enabled_date_procured" required="0" readonly="0" invisible="validity_set == False"/> 
                                        <field name="enable_procurment_amount" required="0" readonly="0" invisible="validity_set == False"/> 
                                        <field name="enabled_date_paid" required="0" readonly="0" invisible="validity_set == False"/> 
                                        <field name="task_start_date" readonly="0" invisible="1" string="Start date"/> 
                                        <field name="task_end_date" readonly="0" invisible="1" string="End date"/> 
                                        <field name="closing_date" readonly="0" invisible="1" required="0" string="Closed Date"/> 
                                        <field name="remaining_task_duration" readonly="0" invisible="1"/> 
                                        <field name="percentage_of_remaining_task" readonly="0" invisible="1" widget="progressbar"/> 
                                        <field name="users_followers" widget="many2many_tags" required="0" invisible="0" readonly="0" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                        <field name="res_users" widget="many2many_tags" required="0" readonly="1"/> 

                                    </group>
                                    
                                </group>
                                <field name="unfreezed_budget_reason" string="Reason" placeholder="Reason for Addition PO..." widget="html"
                                    required="to_unfreezed_budget == True" invisible="1" readonly="to_unfreezed_budget != True"/>
                                <notebook>
                                    
                                    <page name="description" string="More Description">
                                        <field name="description" string="More Notes" placeholder="Notes..." widget="html" required="0" readonly="state not in ['submit']"/>
                                        
                                    </page>
                                    <page name="sub_stages" string="Sub Tasks" invisible="1">
                                     <!-- invisible="not has_sub_stage"> -->
                                        <field name="memo_sub_stage_ids">
                                            <tree string="Sub tasks">
                                                <field name="name"/>
                                                <field name="description" invisible="0"/>
                                                <field name="approver_ids" widget="many2many_tags" readonly="1"/>
                                                <field name="memo_id" invisible="1" column_invisible="1"/>
                                                <!-- <field name="sub_stage_id" invisible="0"/> -->
                                                <field name="sub_stage_done" invisible="0" readonly="1"/>
                                                <button name="confirm_sub_stage_done" string="Confirm" class="oe_highlight btn-sm" type="object" invisible="sub_stage_done"/>
                                            </tree>
                                            <form string="Sub tasks">
                                                <group>
                                                    <group>
                                                        <field name="name"/>
                                                        <field name="memo_id" invisible="1" />
                                                    </group>
                                                    <group>
                                                        <field name="sub_stage_done" invisible="0" readonly="1"/>
                                                        <field name="sub_stage_id" invisible="1"/>
                                                    </group>
                                                    <notebook>
                                                        <page name="Invoices" string="Finances" invisible="0">
                                                            <field name="invoice_ids" context="{'default_move_type': 'in_invoice', 'default_memo_id': active_id, 'form_view_ref': 'account.view_move_form'}">
                                                                <tree string="Invoices">
                                                                    <field name="memo_id" string="Memo" invisible="1" column_invisible="1"/>  
                                                                    <field name="memo_state" string="Memo state" invisible="1" column_invisible="1"/>  
                                                                    <field name="name" string="#" invisible="0"/>  
                                                                    <field name="partner_id" string="Beneficiary" invisible="0"/> 
                                                                    <field name="move_type" string="Type" invisible="1" column_invisible="1"/> 
                                                                    <field name="ref" string="Ref" invisible="1" column_invisible="1"/>  
                                                                    <field name="date" string="Date" invisible="1" column_invisible="1"/> 
                                                                    <field name="journal_id" string="Payment journal" required="0"/>  
                                                                    <field name="amount_total" string="Amount" invisible="0"/> 
                                                                    <field name="partner_bank_id" string="Bank" invisible="1" column_invisible="1"/>
                                                                    <field name="bank_partner_id" string="Recipients Bank" invisible="1" column_invisible="1"/> 
                                                                     <field name="bank_partner_account" string="Bank Account Number" invisible="1" column_invisible="1"/>
                                                                    <field name="state" string="Status" invisible="1" column_invisible="1"/> 
                                                                    <field name="stage_invoice_name" invisible="1" column_invisible="1"/> 
                                                                    <button name="action_post" string="Post" class="oe_highlight btn-sm" type="object" invisible="memo_state not in ['Approve']" groups="account.group_account_invoice,base.group_system,company_memo.mainmemo_account,account.group_account_manager"/>
                                                                    <field name="payment_state" string="Payment Status" invisible="0"/>  
                                                                    <button name="action_register_payment" id="account_invoice_payment_btn" type="object" class="oe_highlight btn-sm" 
                                                                    invisible="memo_state not in ['Approve'] or state != 'posted' or payment_state != 'not_paid' or move_type not in ['out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt']" 
                                                                    string="Register Payment"
                                                                    groups="account.group_account_invoice,base.group_system,company_memo.mainmemo_account,account.group_account_manager"/>
                                                                     <!-- context="{'default_partner_bank_id':partner_bank_id, 'default_bank_partner_id':bank_partner_id, 'default_bank_partner_account':bank_partner_account}" -->
                                                                </tree>
                                                            </field>
                                                        </page>
                                                        <page name="attachment" string="Attachments">
                                                            <field name="attachment_ids" string="Attachment" domain="[('id', '=', None)]" context="{'default_res_model': 'memo.model', 'default_res_id': active_id, 'default_public': True}">
                                                                <tree string="Attachment">
                                                                
                                                                    <field name="stage_document_name" string="Required Documents"/> 
                                                                    <field name="name" string="Document Name"/> 
                                                                    <field name="datas" filename="name" string="File"/>
                                                                    <field name="stage_document_required" string="Is Compulsory"/>
                                                                    <field name="is_locked" string="Locked?" invisible="0" />
                                                                </tree>
                                                                <form string="Attachment">
                                                                    <group>
                                                                        <group>
                                                                            <field name="stage_document_name" string="Required Documents" readonly="1" force_save="1"/> 
                                                                            <field name="name" string="Document Name" readonly="is_locked == True"/> 
                                                                        </group>
                                                                        <group>
                                                                            <field name="datas" filename="name" string="File" readonly="is_locked == True"/>
                                                                            <field name="stage_document_required" string="Is Compulsory" readonly="1" force_save="1"/> 
                                                                            <field name="is_locked" string="Locked?" invisible="1"/> 
                                                                        </group>
                                                                    </group>
                                                                </form>
                                                            </field>
                                                        </page>
                                                        
                                                    </notebook>
                                                </group>
                                            </form>
                                        </field>
                                        
                                    </page>
                                    <page name="waybill" string="Transportation" invisible="memo_type_key not in ['transport', 'procurement', 'warehouse', 'cfwd', 'agency', 'travel']">
                                        <form string="Waybill">
                                            <sheet>
                                                <div class="oe_title">
                                                    <h2>
                                                        WAYBILLS / TRANSPORT DETAILS
                                                    </h2>
                                                </div>
                                                <div class='alert alert-info' role="alert">
                                                    Kindly add the items you want to transport here.
                                                    <button name="print_way_bill" type="object" class="oe_highlight oe_left sm pl-3" string="Print Way bill"/>
                                                    <button name="send_client_mail_gate_pass" type="object" class="oe_highlight oe_left sm" string="Send mail to Client for gate pass"/>
                                                </div>
                                                <newline/>
                                                <group>
                                                    <group>
                                                        <field name="truck_company_name" readonly="state not in ('submit', 'Sent')"/>
                                                        <field name="truck_reg" readonly="state not in ('submit', 'Sent')"/>
                                                        <field name="truck_type" readonly="state not in ('submit', 'Sent')"/>
                                                        <field name="truck_driver" readonly="state not in ('submit', 'Sent')"/>
                                                        <field name="truck_driver_phone" readonly="state not in ('submit', 'Sent')"/>
                                                    </group>
                                                    <group>
                                                        <field name="waybill_from" readonly="state not in ('submit', 'Sent')"/>
                                                        <field name="waybill_to" readonly="state not in ('submit', 'Sent')"/>
                                                        <field name="waybill_date" readonly="state not in ('submit', 'Sent')"/>
                                                        <field name="waybill_expected_arrival_date" readonly="state not in ('submit', 'Sent')"/>
                                                        <field name="waybill_note" required="0"/>
                                                        <field name="waybill_items"/>
                                                    </group>
                                                </group>
                                                <notebook>
                                                    <page string="Waybill items" name="wyitem">
                                                        <field name="waybill_ids" readonly="state not in ('submit', 'Sent')">
                                                            <tree string="waybill" editable="bottom">
                                                                <!-- <field name="product_id" required="1"/> -->
                                                                <field name="item" required="1"/>
                                                                <field name="current_location" required="1"/>
                                                                <field name="quantity" required="1"/>
                                                                <field name="uom" required="1"/>
                                                                <field name="waybill_number"/>
                                                                <field name="waybill_desc"/>
                                                                <field name="loaded_by" required="1"/>
                                                                <field name="loaded_date"/>
                                                            </tree>
                                                        </field>
                                                    </page>
                                                </notebook>
                                            </sheet>
                                        </form>
                                    </page>
                                    <page name="PurchaseOrder" string="Purchase Order" invisible="1">
                                        <button name="action_add_extra_po" string="Add PO" class="oe_highlight btn-sm" type="object"/>
                                        <button name="update_file_po" string="Update file PO" class="oe_highlight btn-sm" type="object"/>
                                         <!-- invisible="freeze_po_budget != True" -->
                                         <field name="set_all_po" force_save="1"/>
                                        <!-- <field name="po_ids" force_save="1" readonly = "state not in ['submit', 'Sent'] or freeze_po_budget == True" -->
                                        <field name="po_ids" force_save="1" readonly = "1"
                                        context="{'default_memo_id': active_id, 'default_memo_state': state, 'default_memo_type': memo_type, 
                                        'default_memo_type_key': memo_type_key, 'default_date_planned': enabled_date_validity, 'default_date_order': enabled_date_procured}"
                                        domain="[('id', 'in', [0])]">
                                            <tree string="PO" no_open="1" decoration-info="state == 'draft'" decoration-primary="state in ['done']" decoration-success="state in ['purchase']" decoration-danger="state == 'draft'" export_xlsx="1">
                                                <field name="memo_state" string="Memo State" column_invisible="1"/> 
                                                <field name="memo_type_key" string="memo key" column_invisible="1"/>  
                                                <field name="memo_id" string="Memo" column_invisible="1"/> 
                                                <field name="memo_type" string="Memo type" column_invisible="1"/> 
                                                <field name="name" string="PO Number"/>
                                                <field name="date_planned" string="Date"/>
                                                <field name="state" string="PO Status" widget="badge"/>
                                                <field name="invoice_status" string="Payment Status" widget="badge"/>
                                                <field name="picking_ids" string="Receipt(s)" widget="many2many_tags" invisible="1"/>
                                                <field name="amount_total" string="Total" sum="total"/>
                                                <!-- <field name="is_shipped" column_invisible="1"/> -->
                                                <!-- <field name="incoming_picking_count" widget="statinfo" column_invisible="1" string="Receipt" help="Incoming Shipments"/> -->
                                                <!-- invisible="state not in ('purchase', 'done')" data-hotkey="y" groups="stock.group_stock_user"/> -->
                                                <!-- <button name="button_confirm" type="object" invisible="state not in ['draft', 'sent']" string="Confirm Order" context="{'validate_analytic': True}" class="oe_highlight" id="bid_confirm" data-hotkey="q"/> -->
                                                <button name="button_view_po" type="object" string="View" class="oe_highlight btn-sm" id="view_po" data-hotkey="q"/>
                                            </tree>
                                            <form string="Purchase Order" class="o_purchase_order">
                                                <header>
                                                    <button name="action_rfq_send" string="Send PO by Email" type="object" />
                                                    <button name="button_confirm" type="object" invisible="state not in ['draft', 'sent']" string="Confirm Order" context="{'validate_analytic': True}" class="oe_highlight" id="bid_confirm" data-hotkey="q"/>
                                                    <button name="action_create_invoice" string="Create Bill" 
                                                    invisible="state not in ('purchase', 'done') or memo_state in ['Done', 'Approve2', 'Approve2', 'Approve']"
                                                    type="object" context="{'create_bill':True}"/>
                                                    <button name="action_view_picking" string="Receive Products" class="oe_highlight" type="object" invisible="state not in ('purchase', 'done')"/>
                                                    <field name="state" widget="statusbar" statusbar_visible="draft,sent,purchase" readonly="1"/>
                                                </header>
                                                <sheet>
                                                    <div class="oe_button_box" name="button_box">
                                                        <button type="object" name="action_view_invoice" class="oe_stat_button" icon="fa-pencil-square-o" invisible="invoice_count == 0 or state in ('draft', 'sent', 'to approve')">
                                                            <field name="invoice_count" widget="statinfo" string="Vendor Bills"/>
                                                            <field name="invoice_ids" invisible="1"/>
                                                        </button>
                                                    </div>
                                                    <div class="oe_title">
                                                        <h1 class="d-flex">
                                                            <field name="priority" widget="priority" class="me-3"/>
                                                            <field name="name" readonly="1"/>
                                                            <field name="code" readonly="1"/>
                                                        </h1>
                                                    </div>
                                                    <group>
                                                        <group>
                                                            <field name="partner_id" widget="res_partner_many2one" context="{'res_partner_search_mode': 'supplier', 'show_vat': True}" placeholder="Name, TIN, Email, or Reference" readonly="state in ['cancel', 'done', 'purchase'] or memo_state in ['Done', 'Approve2', 'Approve2', 'Approve']"/>
                                                            <field name="partner_ref"/>
                                                            <field name="memo_state"/>
                                                            <!-- <field name="is_shipped" column_invisible="1"/> -->
                                                            <!-- <field name="incoming_picking_count" widget="statinfo" column_invisible="1" string="Receipt" help="Incoming Shipments"/> -->
                                                
                                                            <field name="currency_id" groups="base.group_multi_currency" force_save="1" readonly="state in ['cancel', 'done', 'purchase']"/>
                                                            <!-- <field name="id" invisible="1"/> -->
                                                            <field name="company_id" invisible="1" readonly="state in ['cancel', 'done', 'purchase']"/>
                                                            <field name="currency_id" invisible="1" readonly="state in ['cancel', 'done', 'purchase']" groups="!base.group_multi_currency"/>
                                                            <field name="tax_calculation_rounding_method" invisible="1"/>
                                                        </group>
                                                        <group>
                                                            <field name="date_order" invisible="state in ('purchase', 'done') or memo_state in ['Done', 'Approve2', 'Approve2', 'Approve']" readonly="state in ['cancel', 'done', 'purchase']"/>
                                                            <label for="date_approve" invisible="state not in ('purchase', 'done')"/>
                                                            <div name="date_approve" invisible="state not in ('purchase', 'done')" class="o_row">
                                                                <field name="date_approve"/>
                                                                <field name="mail_reception_confirmed" invisible="1"/>
                                                                <span class="text-muted" invisible="not mail_reception_confirmed">(confirmed by vendor)</span>
                                                            </div>
                                                            <label for="date_planned"/>
                                                            <div name="date_planned_div" class="o_row">
                                                                <field name="date_planned" string="Validity Date" readonly="state not in ('draft', 'to approve', 'purchase') or memo_state in ['Done', 'Approve2', 'Approve2', 'Approve']"/>
                                                                <field name="mail_reminder_confirmed" invisible="1"/>
                                                                <span class="text-muted" invisible="not mail_reminder_confirmed">(confirmed by vendor)</span>
                                                            </div>
                                                            <label for="receipt_reminder_email" class="d-none" groups="purchase.group_send_reminder"/>
                                                            <div name="reminder" class="o_row" groups="purchase.group_send_reminder" title="Automatically send a confirmation email to the vendor X days before the expected receipt date, asking him to confirm the exact date.">
                                                                <field name="receipt_reminder_email"/>
                                                                <span>Ask confirmation</span>
                                                                <div class="o_row oe_inline" invisible="not receipt_reminder_email">
                                                                    <field name="reminder_date_before_receipt"/>
                                                                    day(s) before
                                                                    <widget name="toaster_button" button_name="send_reminder_preview" title="Preview the reminder email by sending it to yourself." invisible="not id"/>
                                                                </div>
                                                            </div>
                                                        </group>
                                                    </group>
                                                    <notebook>
                                                        <page string="Products" name="products">
                                                            <field name="tax_country_id" invisible="1"/>
                                                            <field name="order_line" widget="section_and_note_one2many" mode="tree,kanban" context="{'default_state': 'draft'}" readonly="state in ('done', 'cancel') or memo_state in ('done', 'refuse')">
                                                                <tree string="Purchase Order Lines" editable="bottom">
                                                                    <control>
                                                                        <create name="add_product_control" string="Add a product"/>
                                                                        <create name="add_section_control" string="Add a section" context="{'default_display_type': 'line_section'}"/>
                                                                        <create name="add_note_control" string="Add a note" context="{'default_display_type': 'line_note'}"/>
                                                                        <button name="action_add_from_catalog" string="Catalog" type="object" class="px-4 btn-link" context="{'order_id': parent.id}"/>
                                                                    </control>
                                                                    <field name="tax_calculation_rounding_method" column_invisible="True"/>
                                                                    <field name="display_type" column_invisible="True"/>
                                                                    <field name="company_id" column_invisible="True"/>
                                                                    <field name="currency_id" column_invisible="True"/>
                                                                    <field name="state" column_invisible="True"/>
                                                                    <field name="product_type" column_invisible="True"/>
                                                                    <field name="product_uom" column_invisible="True" groups="!uom.group_uom"/>
                                                                    <field name="product_uom_category_id" column_invisible="True"/>
                                                                    <field name="invoice_lines" column_invisible="True"/>
                                                                    <field name="sequence" widget="handle"/>
                                                                    <field name="product_id" readonly="state in ('purchase', 'to approve', 'done', 'cancel')" required="not display_type" width="35%" context="{'partner_id':parent.partner_id, 'quantity':product_qty, 'company_id': parent.company_id}" force_save="1" domain="[('purchase_ok', '=', True)]"/>
                                                                    <field name="name" widget="section_and_note_text"/>
                                                                    <field name="date_planned" optional="hide" required="not display_type" force_save="1"/>
                                                                    <field name="analytic_distribution" widget="analytic_distribution" optional="hide" groups="analytic.group_analytic_accounting" options="{'product_field': 'product_id', 'business_domain': 'purchase_order', 'amount_field': 'price_subtotal'}"/>
                                                                    <field name="product_qty"/>
                                                                    <field name="qty_received_manual" column_invisible="True"/>
                                                                    <field name="qty_received_method" column_invisible="True"/>
                                                                    <field name="qty_received" string="Received" column_invisible="parent.state not in ('purchase', 'done')" readonly="qty_received_method != 'manual'" optional="show"/>
                                                                    <field name="qty_invoiced" string="Billed" column_invisible="parent.state not in ('purchase', 'done')" optional="show"/>
                                                                    <field name="product_uom" string="UoM" groups="uom.group_uom" readonly="state in ('purchase', 'done', 'cancel')" required="not display_type" options="{'no_open': True}" force_save="1" optional="show"/>
                                                                    <field name="product_packaging_qty" invisible="not product_id or not product_packaging_id" groups="product.group_stock_packaging" optional="show"/>
                                                                    <field name="product_packaging_id" invisible="not product_id" context="{'default_product_id': product_id, 'tree_view_ref':'product.product_packaging_tree_view', 'form_view_ref':'product.product_packaging_form_view'}" groups="product.group_stock_packaging" optional="show"/>
                                                                    <field name="price_unit" readonly="qty_invoiced != 0"/>
                                                                    <button name="action_purchase_history" type="object" icon="fa-history" title="Purchase History" invisible="not id"/>
                                                                    <field name="taxes_id" widget="many2many_tags" domain="[('type_tax_use', '=', 'purchase'), ('company_id', 'parent_of', parent.company_id), ('country_id', '=', parent.tax_country_id), ('active', '=', True)]" context="{'default_type_tax_use': 'purchase', 'search_view_ref': 'account.account_tax_view_search'}" options="{'no_create': True}" optional="show"/>
                                                                    <field name="discount" string="Disc.%" readonly="qty_invoiced != 0" optional="hide"/>
                                                                    <field name="price_subtotal" string="Tax excl."/>
                                                                    <field name="price_total" string="Tax incl." column_invisible="parent.tax_calculation_rounding_method == 'round_globally'" optional="hide"/>
                                                                </tree>
                                                                <form string="Purchase Order Line">
                                                                        <field name="tax_calculation_rounding_method" invisible="1"/>
                                                                        <field name="state" invisible="1"/>
                                                                        <field name="display_type" invisible="1"/>
                                                                        <field name="company_id" invisible="1"/>
                                                                        <group invisible="display_type">
                                                                            <group>
                                                                                <field name="product_uom_category_id" invisible="1"/>
                                                                                <field name="product_id" context="{'partner_id': parent.partner_id}" widget="many2one_barcode" domain="[('purchase_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]" readonly="state in ('purchase', 'to approve', 'done', 'cancel')"/>
                                                                                <label for="product_qty"/>
                                                                                <div class="o_row">
                                                                                    <field name="product_qty"/>
                                                                                    <field name="product_uom" groups="uom.group_uom" required="not display_type"/>
                                                                                </div>
                                                                                <field name="qty_received_method" invisible="1"/>
                                                                                <field name="qty_received" string="Received Quantity" invisible="parent.state not in ('purchase', 'done')" readonly="qty_received_method != 'manual'"/>
                                                                                <field name="qty_invoiced" string="Billed Quantity" invisible="parent.state not in ('purchase', 'done')"/>
                                                                                <field name="product_packaging_qty" invisible="not product_id or not product_packaging_id" groups="product.group_stock_packaging"/>
                                                                                <field name="product_packaging_id" invisible="not product_id" context="{'default_product_id': product_id, 'tree_view_ref':'product.product_packaging_tree_view', 'form_view_ref':'product.product_packaging_form_view'}" groups="product.group_stock_packaging"/>
                                                                                <field name="price_unit"/>
                                                                                <field name="taxes_id" widget="many2many_tags" domain="[('type_tax_use', '=', 'purchase'), ('company_id', 'parent_of', parent.company_id), ('country_id', '=', parent.tax_country_id)]" options="{'no_create': True}"/>
                                                                            </group>
                                                                            <group>
                                                                                <field name="date_planned" widget="date" required="not display_type"/>
                                                                                <field name="analytic_distribution" widget="analytic_distribution" groups="analytic.group_analytic_accounting" options="{'product_field': 'product_id', 'business_domain': 'purchase_order'}"/>
                                                                            </group>
                                                                            <group>
                                                                            <notebook colspan="4">
                                                                                <page string="Notes" name="notes">
                                                                                    <field name="name"/>
                                                                                </page>
                                                                                <page string="Invoices and Incoming Shipments" name="invoices_incoming_shiptments">
                                                                                    <field name="invoice_lines"/>
                                                                                </page>
                                                                            </notebook>
                                                                            </group>
                                                                        </group>
                                                                        <label for="name" string="Section Name (eg. Products, Services)" invisible="display_type != 'line_section'"/>
                                                                        <label for="name" string="Note" invisible="display_type != 'line_note'"/>
                                                                        <field name="name" nolabel="1" invisible="not display_type"/>
                                                                </form>
                                                                 
                                                            </field>
                                                            <group>
                                                                <group>
                                                                    <field colspan="2" name="notes" nolabel="1" placeholder="Define your terms and conditions ..."/>
                                                                </group>
                                                                <group class="oe_subtotal_footer">
                                                                    <field name="tax_totals" widget="account-tax-totals-field" nolabel="1" colspan="2" readonly="1"/>
                                                                </group>
                                                            </group>
                                                            <div class="clearfix"/>
                                                        </page>
                                                        <page name="attachment" string="Attachments">
                                                            <field name="po_attachment_ids" string="Attachment" domain="[('id', '=', None)]" context="{'default_res_model': 'purchase.order', 'default_res_id': active_id, 'default_public': True}">
                                                                <tree string="Attachment">
                                                                    <field name="name" string="Document Name"/> 
                                                                    <field name="datas" filename="name" string="File"/>
                                                                </tree>
                                                                <form string="Attachment">
                                                                    <group>
                                                                        <group>
                                                                            <field name="name" string="Document Name"/> 
                                                                        </group>
                                                                        <group>
                                                                            <field name="datas" filename="name" string="File"/>
                                                                        </group>
                                                                    </group>
                                                                </form>
                                                            </field>
                                                        </page>
                                                         
                                                    </notebook>  
                                                </sheet>
                                            </form>
                                        </field>
                                        <separator string="PO request process"/>
                                        <field name="po_memo_ids" force_save="1" readonly = "0"
                                        context="{'form_view_ref': 'company_memo.memo_model_new_simple_form_view'}">
                                            <tree string="" delete="0">
                                                <field name="name" string="Project name"/>
                                                <field name="code" string="Project code"/> 
                                                <field name="date"/> 
                                                <field name="employee_id" invisible="1"/>
                                                <field name="set_staff" string="Assigned to"/>
                                                <field name="stage_id"/>
                                                <!-- <field name="status_progress" widget="progressbar" string="Progress(%)" invisible="1"/> -->
                                <button name="unlink" string="Delete" class="oe_highlight btn-sm" type="object"/>
                                            </tree>
                                        </field>
                                    </page>
                                    <page name="SaleOrder" string="Sale Order" invisible="1">
                                        <field name="so_ids" force_save="1"
                                        context="{'default_memo_id': active_id, 'default_partner_id': client_id, 'default_memo_state': state, 'default_memo_type': memo_type, 'default_memo_type_key': memo_type_key}">
                                            <tree string="SO">
                                                <field name="memo_state" string="Memo State" column_invisible="1"/> 
                                                <field name="memo_type_key" string="memo key" column_invisible="1"/>  
                                                <field name="memo_id" string="Memo" column_invisible="1"/> 
                                                <field name="memo_type" string="Memo type" column_invisible="1"/> 
                                                <field name="name" string="SO Number"/>
                                                <field name="state" string="SO Status"/>
                                                <field name="invoice_status" string="Invoice status"/>
                                                <field name="amount_total" string="Total" sum="total"/>
                                                <button name="action_confirm" type="object" invisible="state not in ['draft', 'sent']" string="Confirm Order" context="{'validate_analytic': True}" class="oe_highlight" id="bid_confirm" data-hotkey="q"/>
                                            </tree>
                                        </field>
                                    </page>
                                    <page name="Products" string="Request item" invisible="memo_type_key not in ['material_request', 'cash_advance', 'soe', 'vehicle_request']">
                                        <field name="product_ids" string="Items" context="{'default_state': state, 'default_memo_type': memo_type, 'default_memo_type_key': memo_type_key}">
                                            <tree string="Items" editable="bottom">
                                                <field name="state" string="State" invisible="1"/> 
                                                <field name="memo_type_key" string="memo key" invisible="1"/> 
                                                <field name="to_retire" string="To Retire"/>
                                                 <!-- invisible="memo_type_key not in ['soe']"/>  -->
                                                <!-- <field name="district_id" string="District" invisible="1"/>  -->
                                                <field name="memo_id" string="Memo" invisible="1"/> 
                                                <field name="memo_type" string="Memo type" invisible="1"/> 
                                                <field name="product_id" string="Product" required="memo_type_key in ['material_request', 'procurement_request','procurement', 'cash_advance', 'soe', 'vehicle_request']" invisible="memo_type_key in ['Payment', 'Internal', 'leave_request', 'loan']"/> 
                                                <field name="description" string="Description" invisible="0" required="not product_id"/> 
                                                <field name="code" string="Code" readonly="1" invisible="memo_type_key in ['Payment', 'Internal', 'leave_request', 'loan']"/> 
                                                <field name="quantity_available" string="Request Quantity" invisible="memo_type_key in ['Payment', 'Internal', 'leave_request', 'loan']"/> 
                                                <field name="amount_total" string="Unit Price" invisible="memo_type_key in ['Payment', 'Internal', 'leave_request', 'loan']"/> 
                                                <field name="used_qty" string="Used Qty" readonly="memo_type_key not in ['soe']" invisible="memo_type_key in ['Payment', 'Internal', 'leave_request', 'loan']"/> 
                                                <field name="used_amount" string="Used Amount" readonly="memo_type_key not in ['soe']" invisible="memo_type_key in ['Payment', 'Internal', 'leave_request', 'loan']"/> 
                                                <field name="note" string="Note" invisible="0"/> 
                                                <field name="source_location_id" string="Source Location" readonly="state in ['draft']" invisible="memo_type_key in ['Payment', 'Internal', 'leave_request', 'loan']"/> 
                                                <field name="dest_location_id" string="Destination Location" readonly="state in ['draft']" invisible="memo_type_key in ['Payment', 'Internal', 'leave_request', 'loan']"/>
                                                <field name="retired" string="Retired" invisible="memo_type_key not in ['soe']"/>
                                            </tree>
                                        </field>
                                    </page>
                                    <!--ADDD-->
                                    <!-- <page name="Invoices" string="Finance" invisible="memo_type_key not in ['Payment', 'payment', 'pay', 'export_process', 'import_process', 'agency_process', 'procurement_request', 'procurement', 'transport', 'travel']"> -->
                                    <page name="Invoices" string="Finance" invisible="is_internal_transfer != True">
                                        <field name="invoice_ids" context="{'default_move_type': 'in_invoice', 'default_memo_id': active_id, 'default_partner_id': client_id, 'form_view_ref': 'account.view_move_form'}" readonly="state in ['Done', 'Approve2']" domain="[('id', '=', None)]">
                                            <tree string="Invoices">
                                                <field name="memo_id" string="Memo" invisible="1" column_invisible="1"/>  
                                                <field name="memo_state" string="Memo state" invisible="1" column_invisible="1"/>  
                                                <field name="name" string="#" invisible="0"/>  
                                                <field name="partner_id" string="Beneficiary" invisible="0"/> 
                                                <field name="move_type" string="Type" invisible="1" column_invisible="1"/> 
                                                <!-- <field name="project_id" string="Related Project" invisible="1" readonly="1"/>  -->
                                                <field name="ref" string="Ref" column_invisible="1"/>  
                                                <field name="date" string="Date" invisible="0"/> 
                                                <field name="journal_id" string="Payment journal" required="0"/>  
                                                <field name="amount_total" string="Amount" invisible="0" sum="total"/> 
                                                <field name="state" string="Status" invisible="0"/> 
                                                <field name="stage_invoice_name" invisible="1" column_invisible="1"/> 
                                                <!-- <button name="action_post" string="Post" class="oe_highlight btn-sm" type="object" invisible="memo_state not in ['Approve']" groups="account.group_account_invoice,base.group_system,company_memo.mainmemo_account,account.group_account_manager"/> -->
                                                <field name="partner_bank_id" string="Bank" invisible="1" column_invisible="1"/>
                                                <field name="bank_partner_id" string="Recipients Bank" invisible="1" column_invisible="1"/> 
                                                <field name="bank_partner_account" string="Recipients Account" invisible="1" column_invisible="1"/> 
                                                <button name="action_post" string="Post" class="oe_highlight btn-sm" type="object" invisible="memo_state not in ['Approve']"/>
                                                <field name="payment_state" string="Payment Status" invisible="0"/>  
                                                <button name="action_register_payment" id="account_invoice_payment_btn" type="object" class="oe_highlight btn-sm" 
                                                invisible="memo_state not in ['Approve'] or state != 'posted' or payment_state != 'not_paid' or move_type not in ['out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt']" 
                                                string="Register Payment" 
                                                groups="account.group_account_invoice,base.group_system,company_memo.mainmemo_account,account.group_account_manager"/>
                                                <!-- context="{'default_partner_bank_id':partner_bank_id, 'default_bank_partner_id':bank_partner_id, 'default_bank_partner_account':bank_partner_account}" -->
                                            </tree>
                                        </field>
                                    </page>
                                    <!--ADDD-->
                                    <!-- <page name="payment_ids" string="Payment Request" invisible="memo_type_key not in ['Payment', 'payment', 'pay']"> -->
                                    <page name="payment_ids" string="Payment Request-" 
                                    invisible="memo_type_key not in ['Payment', 'payment', 'pay'] or is_budget_verification_memo_request == True or is_contract_memo_request == True or is_internal_transfer == True">
                                        <!-- <field name="payment_ids" context="{'default_external_memo_request': 1, 'default_payment_type': 'outbound', 'default_is_internal_transfer': 1, 'default_memo_reference': active_id}" domain="[('state', '=', 'draft')]" readonly="state in ['Done', 'Approve2']"> -->
                                        <field name="payment_ids" invisible="1" readonly="0" 
                                        context="{'default_partner_type': 'supplier','default_is_contract_memo_request': is_contract_memo_request, 'default_external_memo_request': 1, 'default_payment_type': 'outbound', 'default_memo_reference': active_id}" 
                                        domain="[('id', '=', None)]">
                                            <tree string="Payments" edit="1">
                                                <field name="is_internal_transfer" string="Is transfer" readonly="1" force_save="1" invisible="1" column_invisible="1"/>  
                                                <field name="payment_type" string="Payment type" invisible="1" column_invisible="1"/>  
                                                <field name="date" string="Date" invisible="0"/>
                                                <field name="name" string="Ref#" invisible="0"/> 
                                                <field name="journal_id" string="Journal From" invisible="0" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>  
                                                <field name="destination_journal_id" string="Destination journal" invisible="0" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>  
                                                <field name="amount_total" string="Amount" invisible="0" sum="total"/> 
                                                <field name="state" string="Payment Status" invisible="0"/> 
                                                <button name="action_post" string="Post" class="oe_highlight btn-sm" type="object" invisible="state != 'draft'"/>
                                            </tree>
                                        </field>
                                        <field name="payment_ids" readonly="state not in ['submit']" context="{'default_partner_type': 'supplier', 'default_is_internal_transfer': True, 'default_external_memo_request': external_memo_request, 'default_payment_type': 'outbound', 'default_memo_reference': active_id}"
                                        domain="[('id', '=', None)]">
                                            <tree string="Payments" create="1">
                                                <field name="is_internal_transfer" string="Is transfer" readonly="0" force_save="1" column_invisible="1" invisible="1" default="True"/>  
                                                <field name="payment_type" string="Payment type" invisible="1" column_invisible="1"/>  
                                                <field name="date" string="Date" invisible="0"/>
                                                <field name="name" string="Ref#" invisible="0"/> 
                                                <field name="journal_id" string="Journal From" invisible="0" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>  
                                                <field name="destination_journal_id" string="Destination journal" invisible="0" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>  
                                                <field name="amount_total" string="Amount" invisible="0" sum="total"/> 
                                                <field name="state" string="Status" invisible="0"/> 
                                                <button name="action_post" string="Confirm" class="oe_highlight btn-sm" type="object" invisible="state != 'draft'"/>
                                            </tree>
                                            <form string="Items"> 
                                                <header>
                                                    <!-- <button name="action_post" string="Confirm" type="object" class="oe_highlight" invisible="state != 'draft'" data-hotkey="v"/> -->
                                                    <!-- <button name="action_post" string="Confirm" type="object" class="oe_highlight" invisible="state != 'draft'" data-hotkey="v"/>
                                                    <button name="action_draft" string="Reset To Draft" type="object" class="btn btn-secondary" attrs="{'invisible="state not in ('posted', 'cancel')" groups="account.group_account_invoice" data-hotkey="w"/>
                                                    <button name="action_cancel" string="Cancel" type="object" attrs="{'invisible="state', '!=', 'draft'" data-hotkey="z"/>
                                                    <button name="mark_as_sent" string="Mark as Sent" type="object" data-hotkey="q" attrs="{'invisible': ['|', '|', ('state', '!=', 'posted'), ('is_move_sent', '=', True), ('payment_method_code', '!=', 'manual'"/>
                                                    <button name="unmark_as_sent" string="Unmark as Sent" type="object" data-hotkey="k" attrs="{'invisible': ['|', '|', ('state', '!=', 'posted'), ('is_move_sent', '=', False), ('payment_method_code', '!=', 'manual'"/> -->
                                                    <field name="state" widget="statusbar" statusbar_visible="draft,posted"/>

                                                </header>
                                                <sheet>
                                                    <!-- Invisible fields -->
                                                    <!-- <field name="id" invisible="1"/> -->
                                                    <field name="is_move_sent" invisible="1"/>
                                                    <field name="is_reconciled" invisible="1"/>
                                                    <field name="is_matched" invisible="1"/>
                                                    <field name="memo_reference" invisible="1"/>
                                                    
                                                    <field name="payment_method_code" invisible="1"/>
                                                    <field name="show_partner_bank_account" invisible="1"/>
                                                    <field name="require_partner_bank_account" invisible="1"/>
                                                    <field name="available_payment_method_line_ids" invisible="1"/>
                                                    <field name="available_partner_bank_ids" invisible="1"/>
                                                    <field name="suitable_journal_ids" invisible="1"/>
                                                    <field name="country_code" invisible="1"/>
                                                    <field name="partner_type" invisible="1" context="{'default_partner_type': 'supplier'}"/>
                                                    <field name="posted_before" invisible="1"/>
                                                    <field name="reconciled_invoices_type" invisible="1"/>
                                                    <field name="company_id" invisible="1"/>
                                                    <field name="paired_internal_transfer_payment_id" invisible="1"/>
                                                    <field name="available_journal_ids" invisible="1"/>
        
                                                    <div class="oe_button_box" name="button_box">
                                                        <!-- Invoice stat button -->
                                                        <button name="button_open_invoices" type="object" class="oe_stat_button" icon="fa-bars" invisible="reconciled_invoices_count == 0">
                                                            <div class="o_form_field o_stat_info">
                                                                <span class="o_stat_text">
                                                                    <field name="reconciled_invoices_count"/>
                                                                    <span invisible="reconciled_invoices_type != 'invoice'"> Invoice</span>
                                                                    <span invisible="reconciled_invoices_type == 'invoice'"> Credit Note</span>
                                                                </span>
                                                            </div>
                                                        </button>
        
                                                        <!-- Bill stat button -->
                                                        <button name="button_open_bills" type="object" class="oe_stat_button" icon="fa-bars" invisible="reconciled_bills_count == 0">
                                                            <div class="o_form_field o_stat_info">
                                                                <span class="o_stat_text">
                                                                    <field name="reconciled_bills_count"/>
                                                                    <span> Bill</span>
                                                                </span>
                                                            </div>
                                                        </button>
        
                                                        <!-- Statement stat button -->
                                                        <button name="button_open_statement_lines" type="object" class="oe_stat_button" icon="fa-bars" invisible="reconciled_statement_lines_count == 0">
                                                            <div class="o_form_field o_stat_info">
                                                                <field name="reconciled_statement_lines_count"/>
                                                                <span> Transaction</span>
                                                            </div>
                                                        </button>
        
                                                        <!-- Journal Entry  button -->
                                                        <button name="button_open_journal_entry" type="object" class="oe_stat_button" icon="fa-bars" groups="account.group_account_user,account.group_account_readonly">
                                                            <div class="o_stat_info">
                                                                <span class="o_stat_text">Journal Entry</span>
                                                            </div>
                                                        </button>
                                                    </div>
        
                                                    <widget name="web_ribbon" text="Invoicing App Legacy" bg_color="bg-info" invisible="state != 'invoicing_legacy'" tooltip="This payment has been generated through the Invoicing app, before installing Accounting. It has been disabled by the 'Invoicing Switch Threshold Date' setting so that it does not impact your accounting."/>
        
                                                    <div class="oe_title">
                                                        <h1 invisible="state != 'draft'"><span>#</span></h1>
                                                        <h1 invisible="state == 'draft'"><field name="name" readonly="1"/></h1>
                                                    </div>
        
                                                    <group>
                                                        <group name="group1">
                                                            <field name="external_memo_request" invisible="1" context="{'default_partner_type': external_memo_request}"/>
                                                            <field name="is_contract_memo_request" invisible="1" context="{'default_partner_type': is_contract_memo_request}"/>
                                                        
                                                            <field name="is_internal_transfer" invisible="1" readonly="state != 'draft'" force_save="1" default="True"/>
                                                            <field name="payment_type" widget="radio" options="{'horizontal': True}" readonly="state != 'draft'" invisible="1"/>
                                                            <field name="partner_id" context="{'default_is_company': True}" string="Customer" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" readonly="state != 'draft'" invisible="partner_type != 'customer' or is_internal_transfer == True"/>
                                                            <field name="partner_id" context="{'default_is_company': True}" string="Vendor / Contractor" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" readonly="state != 'draft'" invisible="partner_type != 'supplier' or is_internal_transfer == True"/>
                                                            <label for="amount"/>
                                                            <div name="amount_div" class="o_row">
                                                                <field name="amount" readonly="state != 'draft'" default=""/>
                                                                <field name="currency_id" options="{'no_create': True, 'no_open': True}" required="1" readonly="state != 'draft'" groups="base.group_multi_currency"/>
                                                            </div>
                                                            <field name="date" readonly="state != 'draft'"/>
                                                            <field name="ref" string="Memo"/>
                                                            <field name="narration" string="Narration" invisible="0" placeholder="Please enter narration of this payment"/>
                                                        </group>
                                                        <group name="group2">
                                                            <field name="journal_id" domain="[('id', 'in', available_journal_ids)]" invisible="external_memo_request" readonly="state != 'draft'" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                                            <field name="payment_method_line_id" required="1" options="{'no_create': True, 'no_open': True}" readonly="state != 'draft'"/>
        
                                                            <field name="partner_bank_id" string="Customer Bank Account" context="{'default_partner_id': partner_id, 'default_allow_out_payment': True}" invisible="not show_partner_bank_account or partner_type != 'customer' or is_internal_transfer or payment_type == 'inbound'" required="require_partner_bank_account or not is_internal_transfer"/>
                                                            <field name="partner_bank_id" string="Vendor Bank Account" context="{'default_partner_id': partner_id, 'default_allow_out_payment': True}" invisible="not show_partner_bank_account or partner_type != 'supplier' or is_internal_transfer or payment_type == 'inbound'" required="require_partner_bank_account or not is_internal_transfer"/>
        
                                                            <!-- This field should always be readonly but using readonly="1" overrides the other partner_bank_id
                                                            fields readonly condition in the framework, preventing the modification of these fields -->
                                                            <field name="partner_bank_id" string="Company Bank Account" context="{'default_partner_id': partner_id, 'default_allow_out_payment': True}" invisible="not show_partner_bank_account or is_internal_transfer or payment_type == 'outbound'" required="require_partner_bank_account or not is_internal_transfer"/>
                                                            <field name="destination_journal_id" context="{'default_partner_id': partner_id}" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                                            <!--attrs="{'invisible="is_internal_transfer', '=', False)],'readonly': [('state', '!=', 'draft'" required': [('is_internal_transfer', '=', True),('state', '=', 'draft'"/>-->
                                                        </group>
                                                        <group>
                                                            <field name="qr_code" invisible="1"/>
                                                            <div invisible="qr_code" colspan="2" class="text-center">
                                                                <field name="qr_code" widget="html"/>
                                                            </div>
                                                        </group>
                                                    </group>
                                                </sheet>
                                            </form>
                                            
                                        </field>
                                    </page>
                                    <!-- <page name="rr_form" string="Recruitment Request form" invisible="memo_type_key not in ['recruitment_request']"> -->
                                    <page name="rr_form" string="Recruitment Request form" invisible="1">
                                        <form string="Items"> 
                                            <sheet>
                                                <group>
                                                    <group>
                                                        <field name="requested_department_id" string="Requesting Department" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/> 
                                                        <field name="job_tmp" required="memo_type_key in ['recruitment_request']"/> 
                                                        <field name="job_id" string="Job Position" invisible="state not in ['Done', 'Approve', 'Approve2']" required="memo_type_key in ['recruitment_request'] and state in ['Done', 'Approve', 'Approve2']"/> 
                                                        <field name="established_position" required="memo_type_key in ['recruitment_request']"/> 
                                                        <field name="recruitment_mode" string="Recruitment Mode" required="memo_type_key in ['recruitment_request']"/> 
                                                        <field name="qualification" string="Qualification" required="memo_type_key in ['recruitment_request']"/> 
                                                        <field name="age_required" string="Required Age" required="memo_type_key in ['recruitment_request']"/> 
                                                    </group>
                                                    <group>
                                                        <field name="years_of_experience" required="memo_type_key in ['recruitment_request']"/> 
                                                        <field name="expected_employees" required="memo_type_key in ['recruitment_request']"/> 
                                                        <field name="recommended_by"/>
                                                        <field name="date_expected" string="Deadline Date"/>
                                                    </group>
                                                </group>
                                            </sheet>
                                        </form>
                                    </page>
        
                                    <!-- <page name="server_request_page" string="Server Request information" invisible="memo_type_key not in ['server_access']"> -->
                                    <page name="server_request_page" string="Server Request information" invisible="1">
                                        <form string=""> 
                                            <sheet>
                                                <group>
                                                    <group>
                                                        <field name="request_date" readonly="state not in ['submit']"/>
                                                        <field name="request_end_date" readonly="state not in ['submit']"/>
                                                        
                                                        <field name="applicationChange" readonly="state not in ['submit']"/> 
                                                        <field name="datapatch" readonly="state not in ['submit']"/> 
                                                        <field name="enhancement" readonly="state not in ['submit']"/> 
                                                        <field name="databaseChange" readonly="state not in ['submit']"/> 
                                                        <field name="osChange" readonly="state not in ['submit']"/> 
                                                    </group>
                                                    <group>
                                                        <field name="ids_on_os_and_db" readonly="state not in ['submit']"/> 
                                                        <field name="versionUpgrade" readonly="state not in ['submit']"/> 
                                                        <field name="otherChangeOption" readonly="state not in ['submit']"/>
                                                        <field name="other_system_details" readonly="state not in ['submit']"/>
                                                        <field name="justification_reason" readonly="state not in ['submit']"/>
                                                    </group>
                                                </group>
                                            </sheet>
                                        </form>
                                    </page>
                                    <page name="attachment" string="Attachments">
                                        <field name="attachment_ids" string="Attachment" domain="[('id', '=', None)]" context="{'default_res_model': 'memo.model', 'default_res_id': active_id, 'default_public': True}">
                                            <tree string="Attachment">
                                            
                                                <field name="stage_document_name" string="Required Documents"/> 
                                                <field name="name" string="Document Name"/> 
                                                <!-- <field name="datas" filename="name" string="File"/> -->
                                                <field name="stage_document_required" string="Is Compulsory"/>
                                                <field name="is_locked" string="Locked?" invisible="1"/>
                                            </tree>
                                            <form string="Attachment">
                                                <group>
                                                    <group>
                                                        <field name="stage_document_name" string="Required Documents" readonly="1" force_save="1"/> 
                                                        <field name="name" string="Document Name" readonly="is_locked == True"/> 
                                                    </group>
                                                    <group>
                                                        <field name="datas" filename="name" string="File" readonly="is_locked == True"/>
                                                        <field name="stage_document_required" string="Is Compulsory" readonly="1" force_save="1"/> 
                                                        <field name="is_locked" string="Locked?" invisible="1"/> 
                                                    </group>
                                                </group>
                                            </form>
                                        </field>
                                    </page>
                                    <page name="logistic_page" string="Cargo documents" invisible="memo_type_key not in ['import_process', 'export_process', 'agency_process']">
                                        <form string=""> 
                                            <sheet>
                                                <div class="oe_title">
                                                    <h1>
                                                        Cargo Document Import
                                                    </h1>
                                                </div>
                                                <div class='alert alert-info' role="alert">
                                                    Allowed file types: .xls, .xlsx
                                                    Download:  <a href='/company_memo/static/src/cargo_document.xlsx' target="_blank"> <strong> Sheet format</strong> </a> <br/>
                                                </div>
                                                <newline/>
                                                <group>
                                                    <group>
                                                        <field name="assigned_to"/>
                                                         
                                                    </group>
                                                    <group>
                                                        <field name="date_assigned"/>
                                                        <field name="picking_type_id"/>

                                                    </group>
                                                </group>
                                                <button name="import_logistic_item" type="object" class="oe_highlight oe_left sm" string="Import Cargo documents"/>
                                                <button name="action_validate_cargo_line" type="object" class="oe_highlight oe_left sm" string="Generate Cargo stock transfer"/>
                                                <notebook>
                                                    <page string="Cargo documents">

                                                        <field name="logistic_item_ids" context="{'default_memo_type_key': memo_type_key}">
                                                            <tree string="Cargo documents">
                                                                <field name="product_id"/>
                                                                <field name="picking_type_id"/>
                                                                <field name="source_location_id" />
                                                                <field name="destination_location_id"/>
                                                                <field name="memo_type_key" invisible="0"/> 
                                                            </tree>
                                                            <form string="Cargo documents">
                                                                <div class="oe_title">
                                                                    <h1>
                                                                        Cargo Document Import
                                                                    </h1>
                                                                </div>
                                                                <div class='alert alert-info' role="alert">
                                                                    Allowed file types: .xls, .xlsx
                                                                    Download:  <a href='/company_memo/static/src/cargo_document.xlsx' target="_blank"> <strong> Sheet format</strong> </a> <br/>
                                                                </div>
                                                                <newline/>
                                                                <group>
                                                                    <group>
                                                                        <field name="product_id"/>
                                                                        <field name="quantity_to_move"/>
                                                                    </group>
                                                                    <group>
                                                                        <field name="picking_type_id"/>
                                                                        <field name="source_location_id" required="1"/>
                                                                        <field name="destination_location_id" required="1"/>
                                                                        <field name="memo_type_key" invisible="1"/>
                                                                    </group>
                                                                </group>
                                                            </form>
                                                        </field>
                                                    </page>
                                                </notebook>
                                            </sheet>
                                        </form>
                                    </page> 
                                    <page name="comments" string="Comments" invisible="1">
                                        <field name="comments" string="Comments" placeholder="Notes..." widget="html" readonly="state in ['Done', 'Approve']"/>
                                    </page>
        
                                    <page name="supervisor_comments" string="Supervisor's Comments" invisible="1">
                                        <field name="is_supervior" readonly="0" invisible="1"/>
                                        <field name="supervisor_comment" string="Supervisor Comments" placeholder="Notes..." widget="html" readonly="is_supervior"/>
                                    </page>
                                    <page name="manager_comment" string="Manager's Comments" invisible="1">
                                        <field name="is_manager" readonly="0" invisible="1"/>
                                        <field name="manager_comment" string="Manager Comments" placeholder="Notes..." widget="html" readonly="is_manager"/>
                                    </page>
                                    <page name="reason_backs" string="Return Reason">
                                        <div class="">State :<field name="state"/>
                                        Stage :<field name="stage_id"/>
                                        Settings :<field name="memo_setting_id" invisible="1" force_save="1" options="{&quot;no_create&quot;: True}"/></div>
                                        <field name="reason_back" string="Add Notes" placeholder="Notes..." widget="html" readonly="state in ['Done', 'Approve']"/>
                                    </page>
                                    <page name="work_instruction_description" string="Work instruction Description" invisible="1">
                                        <field name="work_instruction_ids" string="Work instruction details" readonly="state not in ['submit', 'Sent']">
                                            <tree string="Work instruction items" editable="bottom">
                                                <field name="memo_id" string="Memo" required="1" invisible="1" column_invisible="1"/>
                                                <field name="description" string="Description" placeholder="Notes..." required="0"/>
                                                <!-- widget="html" -->
                                                <button name="print_work_instruction" string="Print" icon="fa-print" type="object" class="btn-primary btn-sm"/>
                                            </tree>
                                        </field>
                                    </page>
                                    <page name="frame_agreement_page" string="Frame Agreement" invisible="1">
                                        <field name="frame_agreement_ids" string="Frame Agreement" readonly="state not in ['submit', 'Sent']">
                                            <tree string="Frame Agreement items">
                                                <field name="memo_id" string="Memo" invisible="1" column_invisible="1"/>
                                                <field name="name" string="Name" required="1" invisible="0"/>
                                                <field name="code" string="Code" readonly="1" invisible="0"/>
                                                <field name="description" string="Description" placeholder="Notes..." required="0" widget="html"/>
                                                <field name="agreed_budget" string="Budget Agreed" required="1"/>
                                                <field name="currency_id" string="Currency"/>
                                            </tree>
                                        </field>
                                    </page>
                                    <page invisible="1">
                                        <field name="computed_stage_ids" invisible="0"/>
                                    </page>
                                </notebook>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="tree_memo_model_view2">
            <field name="name">Office Memo Tree</field>
            <field name="model">memo.model</field>
            <field name="priority">50</field>
            <field name="arch" type="xml">
                <tree string="Memo Requests">
                    <field name="name" string="Subject"/>
                    <field name="code" string="Request code"/> 
                    <field name="client_id" string="Partner"/> 
                    <field name="date"/> 
                    <field name="employee_id" invisible="0" string="Initiator"/>
                    <field name="set_staff" string="Assigned to"/>
                    <field name="dept_ids" invisible="1"/>
                    <field name="stage_id"/>
                    <field name="total_so_amount" sum="total"/>
                    <!-- <field name="status_progress" widget="progressbar" string="Progress(%)" invisible="1"/> -->
                </tree>
            </field>
        </record>
 
        <record model="ir.ui.view" id="main_memo_model_search_view">
            <field name="name">Internal Memo Request Search</field>
                <field name="model">memo.model</field>
                <field name="arch" type="xml">
                    <search string="Internal Memo Filter"> 
                            <field name="name"/>
                            <field name="dept_ids"/>
                            <field name="vendor_id" string="Vendor"/>
                            <field name="employee_id"/>
                            <field name="set_staff" string="Memo with / Assigned to"/>
                            <field name="project_id"/>
                            <field name="code" string="Code"/> 
                            <field name="date"/> 
                        <group expand="0" string="Group By">
                            <filter name="name" string="Name" icon="terp-personal" domain="[]" context="{'group by':'name'}" />
                            <filter name="Approve" string="Approve" icon="terp-personel" domain="[('state', '=', 'Approve')]" context="{'group by':'state'}" />
                            <filter name="Sent" string="Sent" icon="terp-personel" domain="[('state', '=', 'Sent')]" context="{'group by':'state'}" />
                            <filter name="Done" string="Done" icon="terp-personel" domain="[('state', ' =', 'Done')]" context="{'group by':'state'}" />
                            <filter name="group_to_create_document" string="Status" domain="[]" context="{'group_by' : 'stage_id'}"/>
                            <filter name="Date" string="Date" icon="terp-personal" domain="[]" context="{'group by':'date'}" />
                        </group>
                </search>
                </field>
        </record>
 
        <record model="ir.actions.act_window" id="internal_memo_model_action">
            <field name="name">Internal Memo Request</field>
            <field name="res_model">memo.model</field>
            <field name="type">ir.actions.act_window</field>
             <field name="view_mode">tree,form</field>
             <field name="domain">[('memo_project_type','not in', ['project_pro'])]</field>
        </record>
        <record model="ir.actions.act_window" id="internal_memo_model_document_action">
            <field name="name">Documents Request</field>
            <field name="res_model">memo.model</field>
            <field name="type">ir.actions.act_window</field>
           <field name="domain">[('to_create_document =',True)]</field>
            <field name="context">{'search_default_group_to_create_document': 1, 'default_to_create_document': True}</field>
             <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="internal_memo_action_sent">
            <field name="name">Internal Memo Request</field>
            <field name="res_model">memo.model</field>
            <field name="domain">[('state', '=', 'Sent')]</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="internal_memo_action_Approve">
            <field name="name">Internal Memo Request</field>
            <field name="res_model">memo.model</field>
            <field name="domain">[('state', '=', 'Approve')]</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="memo_model_refuse_action">
            <field name="name">Internal Memo Request</field>
            <field name="res_model">memo.model</field>
            <field name="domain">[('state', '=', 'Refuse')]</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="internal_memo_action_done">
            <field name="name">Internal Memo Request</field>
            <field name="res_model">memo.model</field>
            <field name="domain">[('state', '=', 'Done')]</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="loan_request_action">
            <field name="name">Loan Request</field>
            <field name="res_model">memo.model</field>
            <field name="domain">[('memo_type_key', '=', 'loan')]</field>
            <!-- <field name="context">{'default_memo_type': 'loan'}</field> -->
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="internal_memo_menu_model_main2" name="PLAGFMIS" groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer" action = "internal_memo_model_action" sequence = "2" web_icon="company_memo,static/description/icon.png"/>
        
        <record model="ir.actions.act_url" id="action_memo_open_my_request_url">
            <field name="name">Open URL for the</field>
            <field name="url">/my/requests</field>
            <field name="target">new</field>
        </record>

        <!-- <record model="ir.actions.act_url" id="action_memo_open_my_dashboard_url">
            <field name="name">Open URL for Dashboard</field>
            <field name="url">/my-dashboard</field>
            <field name="target">new</field>
        </record> -->
         

         <menuitem id="memo_project_menu" name="Projects"
            parent="internal_memo_menu_model_main2" sequence="10" groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer"/>
            
            
            <record model="ir.actions.act_window" id="memo_agency_project_action">
                <field name="name">AGENCY PROJECT</field>
                <field name="res_model">memo.model</field>
                <field name="type">ir.actions.act_window</field>
                <field name="domain">[('memo_project_type', '=', 'agency')]</field>
                <field name="context">{'search_default_memo_project_type': 'agency', 'default_memo_project_type': 'agency'}</field>
                <field name="view_mode">tree,form</field>
            </record>
            <!-- <menuitem id="memo_agency_project_menu" sequence="2" name="AGENCY"
                parent="memo_project_menu" action="memo_agency_project_action" 
                groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer"/> -->
            
            <record model="ir.actions.act_window" id="memo_cfwd_project_action">
                <field name="name">CFWD</field>
                <field name="res_model">memo.model</field>
                <field name="type">ir.actions.act_window</field>
                <field name="domain">[('memo_project_type', '=', 'cfwd')]</field>
                <field name="context">{'search_default_memo_project_type': 'cfwd', 'default_memo_project_type': 'cfwd'}</field>
                <field name="view_mode">tree,form</field>
            </record>
            <!-- <menuitem id="memo_cfwd_project_menu" sequence="4" name="CFWD"
                parent="memo_project_menu" action="memo_cfwd_project_action" 
                groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer"/> -->

            <record model="ir.actions.act_window" id="memo_travel_project_action">
                <field name="name">TRAVEL</field>
                <field name="res_model">memo.model</field>
                <field name="type">ir.actions.act_window</field>
                <field name="domain">[('memo_project_type', '=', 'travel')]</field>
                <field name="context">{'search_default_memo_project_type': 'travel', 'default_memo_project_type': 'travel'}</field>
                <field name="view_mode">tree,form</field>
            </record>
            <!-- <menuitem id="memo_travel_project_menu" sequence="5" name="TRAVEL"
                parent="memo_project_menu" action="memo_travel_project_action" 
                groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer"/> -->

            <record model="ir.actions.act_window" id="memo_procurement_project_action">
                <field name="name">PROCUREMENT</field>
                <field name="res_model">memo.model</field>
                <field name="type">ir.actions.act_window</field>
                <field name="domain">[('memo_project_type', 'in', ['procurement', 'procurement_request', 'procurement',])]</field>
                <field name="context">{'search_default_memo_project_type': 'procurement', 'default_memo_project_type': 'procurement'}</field>
                <field name="view_mode">tree,form</field>
            </record>
            <!-- <menuitem id="memo_procurement_project_menu" sequence="6" name="PROCUREMENT"
                parent="memo_project_menu" action="memo_procurement_project_action" 
                groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer"/> -->

            <record model="ir.actions.act_window" id="memo_warehouse_project_action">
                <field name="name">WAREHOUSING</field>
                <field name="res_model">memo.model</field>
                <field name="type">ir.actions.act_window</field>
                <field name="domain">[('memo_project_type', '=', 'warehouse')]</field>
                <field name="context">{'search_default_memo_project_type': 'warehouse', 'default_memo_project_type': 'warehouse'}</field>
                <field name="view_mode">tree,form</field>
            </record>
            <!-- <menuitem id="memo_warehouse_project_menu" sequence="7" name="WAREHOUSING"
                parent="memo_project_menu" action="memo_warehouse_project_action" 
                groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer"/> -->

            <record model="ir.actions.act_window" id="memo_transport_project_action">
                <field name="name">TRANSPORT</field>
                <field name="res_model">memo.model</field>
                <field name="type">ir.actions.act_window</field>
                <field name="domain">[('memo_project_type', '=', 'transport')]</field>
                <field name="context">{'search_default_memo_project_type': 'transport', 'default_memo_project_type': 'transport'}</field>
                <field name="view_mode">tree,form</field>
            </record>
            <record model="ir.actions.act_window" id="memo_project_procurement_request_action">
                <field name="name">PROJECT PROCUREMENT REQUEST</field>
                <field name="res_model">memo.model</field>
                <field name="type">ir.actions.act_window</field>
                <field name="domain">[('memo_project_type', '=', 'project_pro')]</field>
                <field name="context">{'search_default_memo_project_type': 'project_pro', 'default_memo_project_type': 'project_pro'}</field>
                <field name="view_mode">tree,form</field>
            </record>
            <!-- <menuitem id="memo_transport_project_menu" sequence="8" name="TRANSPORT"
                parent="memo_project_menu" action="memo_transport_project_action" 
                groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer"/> -->
        
        <!-- <menuitem id="internal_memo_project_po_request" name="Request(s)"
            parent="internal_memo_menu_model_main2" sequence="27" action="company_memo.internal_memo_model_action"/> -->
        
         <menuitem id="internal_memo_all_request" name="Request(s)"
            parent="internal_memo_menu_model_main2" sequence="29" action="company_memo.internal_memo_model_action"/>
        

        <menuitem id="internal_memo_menu_model_1" name="Office Memo Type"
            parent="internal_memo_menu_model_main2" sequence="30" groups="company_memo.licensed_user"/>
            
            <menuitem id="internal_memo_menu_model2" sequence= "1" name="Memo Requests"
                parent="internal_memo_menu_model_1" action="internal_memo_model_action"/>
            <menuitem id="internal_memo_menu_sent" name="To Approve"
            parent="internal_memo_menu_model_1" sequence= "2" action = "internal_memo_action_sent"
            groups="company_memo.licensed_user"/>

            <menuitem id="internal_memo_model_approve" name="Approved"
            parent="internal_memo_menu_model_1" sequence= "3" action = "internal_memo_action_Approve"/>

            <menuitem id="internal_memo_model_done" name="Done"
            parent="internal_memo_menu_model_1" sequence= "4" action = "internal_memo_action_done"
            />

            <menuitem id="memo_all_project_menu" sequence= "1" name="ALL"
                parent="internal_memo_menu_model_1" action="internal_memo_model_action" 
                groups="base.group_system,company_memo.mainmemo_manager,company_memo.mainmemo_account,company_memo.mainmemo_officer"/>


            <menuitem id="internal_memo_model_id_refuse" name="Refuse"
            parent="internal_memo_menu_model_1" sequence= "5" action = "memo_model_refuse_action"
            />
        
        <!-- <menuitem id="internal_memo_document_menu_model" name="Document Request"
            parent="internal_memo_menu_model_main2" sequence="40" groups="company_memo.licensed_user"/>
            <menuitem id="internal_memo_menu_document_request" sequence= "5" name="Requests"
            parent="internal_memo_document_menu_model" action="internal_memo_model_document_action"/> -->

        <!-- <menuitem parent="internal_memo_menu_model_main2" id="menu_memo_dashboard" 
        name="Dashboard" action="action_memo_open_my_dashboard_url" 
        sequence="60"/> -->

        <!-- <menuitem parent="internal_memo_menu_model_main2" id="menu_memo_website_request" 
        name="Website Request(s)" action="action_memo_open_my_request_url" 
        sequence="70"/> -->

    </data>
</odoo>
